/**
 * Tag Selector Component
 * Generated by Zhuang
 */
import React from 'react';
import { Select, Tag, Tooltip } from 'antd';
import { useTranslation } from 'react-i18next';

const { Option } = Select;

const TagSelector = ({ value = [], onChange, placeholder, options = [], ...rest }) => {
  const { t } = useTranslation();

  // Predefined common tags
  // Keep common tags in Chinese as data values for consistency; i18n typically doesn't translate tags (user data)
  const commonTags = ['晨起','睡前','运动前','运动后','餐前','餐后','服药前','服药后','工作时','休息时','紧张时','放松时','头痛','头晕','胸闷','心悸','疲劳'];

  const handleChange = (newValue) => onChange?.(newValue);

  return (
    <div className="tag-selector">
  <Select
        mode="tags" // Generated by Zhuang: allow free input by typing and Enter
        style={{ width: '100%' }}
  placeholder={placeholder || t('health.filters.tags')}
        value={value}
        onChange={handleChange}
        allowClear
        showSearch
        optionLabelProp="label"
        {...rest}
      >
        {Array.from(new Set([
          ...commonTags,
          ...(options || []),
          ...(value || []),
        ])).map(tag => (
          <Option key={tag} value={tag} label={tag} title={tag}>
            <Tooltip title={tag} placement="right">
              <Tag color="blue" style={{ maxWidth: 240, overflow: 'hidden', textOverflow: 'ellipsis' }}>{tag}</Tag>
            </Tooltip>
          </Option>
        ))}
      </Select>
    </div>
  );
};

export default TagSelector;
