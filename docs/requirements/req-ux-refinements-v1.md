# 需求：用户体验优化 V1 - 时区、图表Y轴及异常值高亮

- **状态**: 草稿
- **版本**: 1.0
- **日期**: 2025-09-26

## 1. 背景

根据用户反馈和产品规划，当前版本在数据展示和用户体验方面存在三个关键优化点：
1.  **时区不一致**：健康记录的创建时间和显示时间不统一，导致用户困惑。
2.  **图表可读性差**：健康趋势图表因使用双Y轴，使得不同指标难以直观比较。
3.  **缺乏健康预警**：图表未能突出显示超出正常范围的健康数据，削弱了其预警价值。

## 2. 业务价值

- **提升用户信任**：通过统一时区，确保数据的准确性和一致性。
- **增强数据洞察力**：统一图表Y轴，让用户能快速比较各项指标。
- **强化健康预警**：通过高亮异常数据，主动提示用户关注潜在的健康风险，提升产品的专业性和实用性。

## 3. 范围

### 3.1. 范围内 (In-Scope)

- **时区处理**：确保健康记录的创建和显示时间在用户浏览器时区下保持一致。
- **图表Y轴统一**：将“Health Dashboard”的图表从双Y轴改为单Y轴。
- **血压异常值高亮**：在图表上用特殊颜色（如橙色或红色）标记超出正常范围的血压数据点。

### 3.2. 不包含 (Out-of-Scope)

- **个人时区设置**：不实现用户自定义时区的功能（作为未来候选）。
- **图表Y轴切换**：不提供在统一/独立Y轴之间切换的选项（作为未来候选）。
- **心率异常值高亮**：本次不处理心率的异常值高亮。

## 4. 验收标准 (Acceptance Criteria)

### 4.1. 时区一致性

- **AC1**: **Given** 用户在浏览器（`UTC+8`）中为一条记录输入时间 `2025-09-26 10:00`，**When** 保存并刷新页面，**Then** 显示的时间仍为 `2025-09-26 10:00`。
- **AC2**: **Given** 同一条记录，**When** 另一用户在 `UTC-5` 时区的浏览器上查看，**Then** 显示的时间应自动转换为 `2025-09-25 21:00`。

### 4.2. 图表Y轴统一

- **AC3**: **Given** 用户查看健康趋势图，**When** 图表加载数据，**Then** 图表必须只显示一个Y轴，并且收缩压、舒张压、心率都使用此Y轴的刻度。
- **AC4**: **Given** 图表上存在收缩压为90和心率为90的两个数据点，**When** 用户查看，**Then** 这两个点在垂直方向上必须处于相同高度。

### 4.3. 血压异常值高亮

- **AC5**: **Given** 正常血压范围定义为“收缩压 < 120 mmHg **且** 舒张压 < 80 mmHg”，**When** 一条记录的血压值（如 130/85）超出了此范围，**Then** 该记录在图表上的对应数据点（收缩压和舒张压的点）应以预警颜色（如橙色）显示。
- **AC6**: **Given** 一条记录的血压值（如 110/75）在正常范围内，**When** 查看图表，**Then** 其数据点应以常规颜色显示。

## 5. 边界场景与约束

- **时区处理**：应能正确处理夏令时转换。
- **高亮定义**：只要收缩压或舒张压任一指标超标，即视为异常。
- **兼容性**：所有变更需兼容现有API，并更新相关测试用例。

## 6. 风险与问题

- **风险**：统一Y轴后，数值范围较小的指标（如心率）曲线可能看起来过于平坦。此为可接受的取舍。

## 7. 后续行动

- [ ] 拆分开发任务，进入实施计划阶段。
- [ ] 创建或更新实施计划文档 `/docs/plans/plan-ux-refinements-v1.md`。
