---
# 需求精炼（极简版）
（输出保存：/docs/requirements/req-<简短英文slug>.md，例如：/docs/requirements/req-tag-filter-or.md）
（若是同一需求演进，可使用 req-tag-filter-or-v2.md）

目的：澄清业务价值与范围，仅聚焦“做什么 & 为什么”，不写实现 / API / 技术方案。
统一流程（Agent 必须遵守）：Discuss → Confirm → Generate（所有阶段一致）。
- Discuss：仅归纳、提问、识别是否需要拆分；绝不提前生成正式文件。
- Confirm：列出拟生成文件名 + 范围一句话；等待“确认生成”或进一步调整。
- Generate：收到确认后生成正式 Markdown；禁止新增实现/设计细节。

## 基本信息
- 标题：一句话（业务价值导向）
- 保存路径示例：/docs/requirements/req-<slug>.md
- 状态：草稿 / 已澄清 / 已同意 / 已关闭
- 背景：为什么需要（2-4 行）
- 业务价值：预期提升/节省/风控效果（尽量量化）

## 范围
- 范围内：
- 不包含：

## 验收标准（逐条）
用自然语言或 Given/When/Then；不要写内部类名 / API 结构。
- 示例：当用户选择多个标签（A,B），系统返回包含 A 或 B 的记录
- 示例：无匹配时返回空数组且总数为 0
- 示例：分页请求第二页时保持 page 与 size 参数语义不变

## 边界场景
- 空输入 / 空标签数组
- 特殊字符（中文、emoji）
- 超过最大可支持标签数量（是否限制？）

## 约束与非功能
仅写必要对外行为约束（协议 / 性能目标 / 兼容性），不写具体实现方案。
- 必须继续使用 page / size
- 标签匹配为 OR 精确匹配，不做模糊
- 性能：10k 条数据下查询 P95 < 300ms（可调整）

## 风险 / 问题
- 风险：查询可能因缺索引变慢
- 问题：是否需要大小写不敏感匹配？（待确认）

## 数据/兼容影响
- 无 schema 变更（如有写明）
- 旧记录标签格式保持不变

## 粗略估算
- 规模：小 / 中 / 大 （或 人日 ~X）
- 前置假设：如“无需新增索引”

## 测试提示（可选）
- 单元：多标签 OR，空标签
- 集成：分页结构不变，JSON 编码不变
- E2E：前端过滤交互 + 清除过滤

## 后续行动（确认后）
- 拆分开发任务（进入实施计划阶段）
- 生成或更新实施计划 /docs/plans/plan-<slug>.md

---
（Generated by Copilot）
